name: "CRM CRUD API Evaluation"
description: "Evaluate agent's ability to implement a REST API for managing people"

prompts:
  - id: crm-api
    prompt: |
      Implement a CRM CRUD API in src/main.rs that manages people records.

      ## Data Model

      Each person has:
      - id: UUID (auto-generated by the server)
      - first_name: String (REQUIRED)
      - last_name: String (REQUIRED)
      - email: Option<String> (optional)
      - phone: Option<String> (optional)

      ## Required Endpoints

      1. POST /people - Create a new person
         - Request body: { first_name, last_name, email?, phone? }
         - Returns: 201 Created with the new person (including generated id)

      2. GET /people - List all people
         - Returns: 200 OK with JSON array of all people

      3. GET /people/:id - Get a specific person
         - Returns: 200 OK with the person, or 404 Not Found

      4. PUT /people/:id - Update a person
         - Request body: { first_name?, last_name?, email?, phone? }
         - Only update fields that are provided (partial update)
         - Returns: 200 OK with updated person, or 404 Not Found

      5. DELETE /people/:id - Delete a person
         - Returns: 204 No Content, or 404 Not Found

      ## Requirements

      - Server MUST listen on port 3000
      - Use JSON for all request/response bodies
      - Store data in memory (HashMap with RwLock already imported)
      - Return appropriate HTTP status codes
      - The stub types (Person, CreatePersonRequest, UpdatePersonRequest, AppState) are already defined

      ## Implementation Tips

      1. Initialize AppState as Arc<RwLock<HashMap<Uuid, Person>>>
      2. Use axum's Router with .route() to define endpoints
      3. Use axum::serve() with TcpListener::bind("0.0.0.0:3000")
      4. Implement each handler function (create_person, list_people, etc.)

      Run `cargo test --test api_conformance` to verify your implementation.
      There are 15 conformance tests that must pass.

    eval_path: ./
    test_harness: !cargo
      test_name: api_conformance

agents:
  - tool: claude_code
    model: claude_opus_4_5
    iterations: 20
  - tool: claude_code
    model: claude_sonnet_4
    iterations: 20
  - tool: claude_code
    model: claude_haiku_4_5
    iterations: 20
